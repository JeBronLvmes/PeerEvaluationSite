<!-- Created by Houyi Fan 7/24/18 -->
<%if current_student != nil and current_student.id.to_s == params[:id].to_s%>

<div class="container-fluid bg-white" ng-app="studentCourseApp" ng-controller="studentCon" ng-init="init(<%= @student.id %>)">

  <div class = "row my-2">
    <!-- heading -->
    <h1 class="mr-auto pl-4">Courses</h1>
  </div>
  <div class="row bg-light">
    <div class="col-3 px-0 mx-0 bg-white" style="min-height:600px;">
      <div>

        <!-- List of Courses On The left -->
        <div id="courseList" class="list-group list-group-flush" role="tablist" ng-hide="showForm" >
          <a class="list-group-item list-group-item-action" id="list-tab" name="course" ng-repeat="c in courses" ng-click="showDetail(c.id, c.name)"
             data-toggle="list" href="#list-home" role="tab" aria-controls="home"> {{c.name}} </a>
        </div>
      </div>
    </div>

    <!-- Complete evaluation form -->
    <div class="container-fluid" ng-show="showForm">
      <form name="evaluationForm" ng-submit="submitEvaluation()">
        <div class="form-group">
          <p id="stdFormTitle">
            Title: {{form_title}}
          </p>
        </div>
        <div class="form-group">
          <p ng-model="$parent.form_questions" id="stdFormQuestions">
            Questions: {{ form_questions }}
          </p>
        </div>

        <div class="form-group">
          <label for="form_answers">Answers</label>
          <input ng-model="$parent.form_answers" id="stdFormAnswers"/>
        </div>

        <button type="submit" class="btn btn-success">Submit</button>
        <button ng-click="toggleEvaluationForm()" class="btn btn-success">Cancel</button>
      </form>
    </div>


    <div id ="pageContent" class="col bg-light px-5 py-4" ng-show="showContent && !showForm">
      <!-- Course Title -->
      <div class="text-center">
        <h3 >{{course_name}} - {{ group_name }}</h3>
      </div>

      <div class="row px-1 mt-5">
        <h3>Incomplete Evaluations</h3>
        <table class="table table-sm">
          <thead>
          <tr>
            <th scope="col">Evaluation Name</th>
            <th scope="col">Due Date</th>
            <th scope="col">Posted Date</th>
            <th scope="col">Completion Status</th>
            <th scope="col">Complete Form</th>
          </tr>
          </thead>
          <tbody>

          <!-- list student evaluations -->
            <tr ng-repeat="e in evaluations">
              <td>{{ e.title }}</td>
              <td>{{ e.due_date }}</td>
              <td>{{ e.posted_date }}</td>
              <td>{{ e.isCompleted }}</td>
              <td><button id="complete_evaluation" class="btn btn-secondary" ng-click="completeEvaluation(e.id)">
                Complete Evaluation
              </button></td>
            </tr>

          </tbody>
        </table>
        <h4 class="text-secondary">{{ incompleteForms }}</h4>


      </div>
    </div>
  </div>
</div>

<%else%>
<div class="container">
  <div class="jumbotron vertical-center my-5 py-5">
    <div class="container text-center">
      <h1 class="display-4">Whoops!</h1>
      <p class="lead">You don't belong here!</p>
    </div>
  </div>
</div>
<%end%>
